#ローグライクの種類
##PDL
* 自動生成(Procedual)
* 死(Death)
* 迷宮(Labyrinth)

##ベルリン解釈

#基本プログラム
* グリッド移動
* ターン制
 * 最初の強敵
* ダンジョンの自動生成
 * 今回は固定マップにしたのでやっていない
* インベントリ
 * 次の強敵
* リソース管理
 * ラスボス
* キャラクター管理
 * Actor < Player
 * Actor < Enemy
* 経路探索
 * 今回は一画面なのでA*でごり押し
 * A*は重い処理
 * 本来であれば、処理負荷軽減の工夫が必要
 * 接続している部屋同士を連結ノードとして扱って、経路探索するなど

#リソース管理
##敵リソース

##アイテムテーブルの構造

#作ることになったきっかけ
きっかけは、海外インディーズゲームの「Risk of Rain」「FTL」

* 海外の自由なスタイルのローグライクを遊んで、自分でも作りたくなった
* リアルタイムのアクションやシューティングはそれまで何回も作っていた
* リソース管理のあるゲームを一度作ってみたかった

#方針

* 最初に作るローグライクなので、できるだけ一般的なローグライクのイメージに忠実に作る
 * 「Risk of Rain」「FTL」のような独特なシステムを持つローグライクは作らない
* 自分が考えるローグライクへのこだわりを重視する
 * 重視したのは *PermaDeath* 
 * 和製ローグライクはアイテム持ち込み可能、またアイテムを失わないようにする工夫がされている
 * これは初心者救済としては有効だが、PermaDeathが持つ、緊張感や死の恐怖を感じさせるメリットが失われてしまう
* こだわりがないところはとことん捨てる（＝楽に実装する）
 * ダンジョンの自動生成はいらない
  * ダンジョンの自動生成は、一般的にはローグライクの目玉となる要素
  * 海外の自由なスタイルのローグライクをプレイして、ダンジョンの自動生成は不要と考えた
 * 4方向にしか移動できないようにした
  * ドラゴンクリスタルは4方向でもそれなりに成立していたので、なんとかなるかもと思った
 * スクロールなしの一画面とした
  * スクロールがないとかなり楽

#開発環境
## OS
* MacOSX(iMac / MacBookAir)

##言語・実行環境
* Haxe(言語)
* OpenFL(クロスプラットフォームで動作する開発環境)
* HaxeFlixel(ゲームライブラリ)

##テキストエディタ・IDE
* Intellij IDEA(IDE)
* Sublime Text2(テキストエディタ)
* CotEditor(テキストエディタ)

##レベルエディタ
* TiledMapEditor

##ゲームのパラメータ設定
* Numbers(表計算ソフト)
 * 実際には Excelに変換して、それをさらにCSVに変換
 * 変換スクリプトにはPythonを使用

##画像作成
* Pixelmator: 画像編集
* Aseprite: ドット絵作成
* ClipStudio Paint Pro: イベント絵作成
* ImageMagick: 画像変換

##サウンド作成
* FLStudio: DAW(BGM作成)
* as3sfxr:効果音作成


##参考にしたローグライク
* かなり参考にしたもの
 * シレン5
 * ドラゴンクリスタル〜ツラニの迷宮
* 少しだけ参考にしたもの
 * Risk of Rain
 * FTL
 * 変愚蛮怒
 * MicRogue
 * 片道勇者

###シレン5
インターフェース、ゲームシステム、たくさん目コピした
特にインターフェース周りはすごく参考になった
遊びながら、自分ならこうしたい、というのを考えた

やはり具体的なイメージがあると、形にしやすい

###ドラゴンクリスタル〜ツラニの迷宮
コンシューマー機では初のローグライク

これを遊んで

###その他参考にしたゲーム
ローグライクではないですけど、開発中にオニリムというアナログゲームが面白かったので、若干影響を受けています。
オニリムは一人で遊ぶカードゲームですが、ぎりぎりクリアできるぐらいのゲームバランスにうまく調整されています。今回のローグライクも、そんなギリギリ感を味わえるような調整を目指してみました。

オニリムでは、扉カードを4つ集めるとゲームクリアとなります。今回のローグライクでも4匹のネコ(＝オーブ)を集めるとゲームクリアとなります。

そして、オニリムでは、悪夢カードを引いてしまうと、扉カードを捨てるなどの不利益な選択を迫られるのですが、今回のローグライクでは、ゲームクリアに必要なオーブを使って先に進むかどうかの選択を迫るようにしました。

##開発期間
開発は4月から開始して、8月末に完成しました。おおよそ5ヶ月かかったことになります。
ただ厳密に言うと、4〜6月あたりはタワーディフェンスの本を書きながら作業していたので、実質は3ヶ月くらいかもしれません。

Togglという作業記録計測ツールを使って、このゲームを完成させるためにかかった時間を測定してみました。

おおよそ270時間となっています。
測り始めたのが6月末なので、それを加味するとだいだい350〜400時間くらいでしょうか。

これだけの時間があれば大作RPGが何本かクリアできそうですね。

これくらいの規模であれば400時間あれば作れる
時給を2000円とすると、2000円x400時間=80万円
となり、このゲームは80万円のコストをかけていることになります。

##プレイ履歴や実績
ローグライク、というよりもPermaDeathはゲーム終了により、経験値がリセットされ、アイテムをすべて失います。

このシステムは、コツコツレベル上げをして、キャラクターを成長させることに喜びを覚えるユーザからは不評です。
特に日本のRPGは、極力PermaDeathを排除して、プレイ時間に比例してキャラクターが強くなるシステムを採用する傾向が強いです。
和製のローグライクもその傾向があり、武器や防具を成長させて持ち込み可能となっているものが多いです。
さらにシレンでは、装備品にタグをつけることでアイテムを失わないようにできます。

このシステムは、初心者救済措置としては優れていて、ローグライク(というよりもPermaDeath)が苦手な幅広いユーザをカバーでき、より多くのユーザに遊んでもらうことが可能となります。

しかし、前に書いたように、PermaDeathが持つ、緊張感や死の恐怖を与えるというメリットを薄めることになります。
私の好みでは、PermaDeathこそがローグライクの核、という印象を持っていたため、幅広いユーザを切り捨ててPermaDeathを採用しました。

PermaDeathでは、ゲームプレイ後に何も残りません。
ただ本当に何も残らないと、それはそれで味気ないです。
それを救済するために、プレイ履歴や実績を導入しました。

##開発メモ
###セーブは重要
デバッグに役立つ。セーブ・ロードがワンキーでできると状況を再現できる
ローグライクは状況の再現に複雑な手順が必要になることが多いので、早めに実装した方が良い
セーブデータはJSONで保存。データ受け渡し用のデータオブジェクトを用意した。ゲームオブジェクトには余計な情報があるため
JSONでテキストに保存するとおかしなパラメータがないかどうかのチェックがやりやすい

###デバッグ機能

* クリックしたところにアイテム配置
* プレイヤーをマウスでつかんで移動
* 敵をマウスでつかんで移動

デバッグがやりやすくなる